<!doctype html>
<html lang="tr">
<head>
  <meta charset="UTF-8">
  <title>benidesay â€“ Sokak hayvanlarÄ± iÃ§in sayaÃ§</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <style>
    :root {
      --bg: #0f172a;
      --card: #0f172a;
      --border: #1e293b;
      --text: #f1f5f9;
      --muted: #94a3b8;
      --accent1: #34d399;
      --accent2: #fbbf24;
    }

    * { box-sizing: border-box; }

    /* â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
       TERTEMÄ°Z, HATA KORKUSUZ ARKA PLAN
       â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” */
    body {
      margin: 0;
      min-height: 100vh;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
      font-size: 1.18rem; /* bÃ¼yÃ¼k, rahat okunan */
      color: var(--text);
      display: flex;
      justify-content: center;
      align-items: stretch;
      padding: 20px 16px 32px;
      background: radial-gradient(circle at top, #1e293b 0%, #0f172a 70%);
    }

    .page {
      width: 100%;
      max-width: 960px;
      margin: 0 auto;
      display: flex;
      flex-direction: column;
      gap: 32px;
    }

    /* â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
       HERO
       â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” */
    .hero {
      text-align: center;
      padding: 6px 8px 0;
    }

    .badge {
      display: inline-flex;
      align-items: center;
      gap: 6px;
      padding: 4px 10px;
      border-radius: 999px;
      background: rgba(15,23,42,0.9);
      border: 1px solid rgba(148,163,184,0.4);
      font-size: 12px;
      margin-bottom: 10px;
    }

    .badge-dot {
      width: 8px;
      height: 8px;
      background: var(--accent1);
      border-radius: 999px;
      box-shadow: 0 0 10px var(--accent1);
    }

    .hero-title {
      font-size: clamp(28px, 4.5vw, 38px);
      font-weight: 700;
      margin: 0 0 10px;
      line-height: 1.25;
    }

    .hero-title .accent {
      background: linear-gradient(135deg, #22c55e, #a3e635, #facc15);
      -webkit-background-clip: text;
      color: transparent;
    }

    .hero-subtitle {
      font-size: 1rem;
      color: var(--muted);
      line-height: 1.55;
    }

    /* â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
       TOTAL COUNTER
       â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” */
    .total-counter {
      margin: 0 auto;
      max-width: 440px;
      padding: 18px 20px 16px;
      border-radius: 22px;
      background: rgba(15,23,42,0.95);
      border: 1px solid rgba(148,163,184,0.4);
      text-align: center;
      box-shadow: 0 18px 40px rgba(0,0,0,0.6);
    }

    .total-label {
      font-size: 12px;
      letter-spacing: 0.15em;
      color: var(--muted);
      margin-bottom: 6px;
    }

    .total-number {
      font-size: 42px;
      font-weight: 700;
      color: var(--accent2);
      text-shadow: 0 0 20px rgba(251,191,36,0.6);
      margin-bottom: 6px;
    }

    .total-note {
      font-size: 13px;
      color: var(--muted);
      display: flex;
      gap: 8px;
      justify-content: center;
      align-items: center;
    }

    .dot-live {
      width: 8px;
      height: 8px;
      border-radius: 999px;
      background: var(--accent1);
      box-shadow: 0 0 10px var(--accent1);
    }

    /* â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
       FORM CARD
       â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” */
    .card {
      width: 100%;
      max-width: 500px;
      padding: 26px 22px 22px;
      border-radius: 26px;
      background: var(--card);
      border: 1px solid var(--border);
      box-shadow: 0 18px 40px rgba(0,0,0,0.6);
    }

    .card-title {
      margin: 0 0 8px;
      font-size: 20px;
      font-weight: 600;
    }

    .card-subtitle {
      margin: 0 0 18px;
      font-size: 14px;
      color: var(--muted);
    }

    .mini-counter {
      display: inline-flex;
      align-items: baseline;
      gap: 6px;
      padding: 4px 10px;
      border-radius: 999px;
      background: rgba(15,23,42,0.95);
      border: 1px solid rgba(248,250,252,0.1);
      margin-bottom: 18px;
      font-size: 13px;
    }

    .mini-counter-number {
      font-size: 17px;
      font-weight: 600;
      color: var(--accent2);
    }

    form {
      display: grid;
      gap: 12px;
    }

    label {
      font-size: 14px;
      color: var(--text);
    }

    input,
    select,
    button {
      width: 100%;
      padding: 10px 14px;
      border-radius: 999px;
      border: 1px solid #334155;
      background: #0f172a;
      color: var(--text);
      font-size: 15px;
    }

    button {
      background: linear-gradient(135deg, #f97316, #facc15);
      color: #111827;
      font-weight: 700;
      cursor: pointer;
      box-shadow: 0 8px 24px rgba(248,181,22,0.5);
      transition: 0.1s ease;
    }

    button:hover { transform: translateY(-1px); }
    button:active { transform: translateY(0); }

    .note {
      margin-top: 8px;
      font-size: 13px;
      color: var(--muted);
      line-height: 1.45;
    }

    .note strong { color: var(--text); }

    .success {
      font-size: 14px;
      color: #4ade80;
      display: none;
      margin-top: 8px;
    }

    /* â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
       INFO BLOCKS
       â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” */
    .info-sections {
      width: 100%;
      max-width: 1000px;
      margin: 40px auto 0;
      display: flex;
      flex-direction: column;
      gap: 50px;
    }

    .info-block {
      display: flex;
      gap: 40px;
      align-items: center;
      justify-content: space-between;
    }

    .info-block.reverse { flex-direction: row-reverse; }

    .info-image {
      width: 40%;
      border-radius: 24px;
      overflow: hidden;
      border: 1px solid rgba(148,163,184,0.3);
      box-shadow: 0 16px 36px rgba(0,0,0,0.6);
    }

    .info-image img {
      width: 100%;
      height: 100%;
      object-fit: cover;
    }

    .info-text {
      flex: 1;
      display: flex;
      flex-direction: column;
      gap: 12px;
    }

    .info-text h3 {
      margin: 0;
      font-size: 22px;
      font-weight: 600;
    }

    .info-text p {
      margin: 0;
      font-size: 15px;
      line-height: 1.55;
      color: var(--muted);
    }

    .info-text p strong { color: var(--text); }

    .info-disclaimer {
      padding: 20px 22px;
      background: rgba(15,23,42,0.95);
      border: 1px solid rgba(148,163,184,0.3);
      border-radius: 20px;
      font-size: 14px;
      line-height: 1.55;
      color: var(--muted);
    }

    .info-disclaimer strong { color: var(--text); }

    /* â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”
       MOBILE
       â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€”â€” */
    @media (max-width: 820px) {
      .info-block,
      .info-block.reverse {
        flex-direction: column;
      }

      .info-image {
        width: 100%;
      }

      .info-image img {
        width: 100%;
        height: auto;
        object-fit: contain; /* kesme YOK */
      }

      .info-text {
        max-width: 100%;
      }
    }

    .footer {
      text-align: center;
      margin-top: 14px;
      font-size: 12px;
      color: var(--muted);
    }
  </style>
</head>

<body>
  <div class="page">

    <!-- HERO -->
    <header class="hero">
      <div class="badge">
        <span class="badge-dot"></span>
        <span>CanlÄ± topluluk sayacÄ±</span>
      </div>

      <h1 class="hero-title">
        Sokakta yaÅŸayan hayvanlar iÃ§in <br>
        <span class="accent">insani Ã§Ã¶zÃ¼mler</span> isteyenlerin sayacÄ±.
      </h1>

      <p class="hero-subtitle">
        <strong>Yakalaâ€“kÄ±sÄ±rlaÅŸtÄ±râ€“yerine bÄ±rak</strong>,
        ÅŸeffaf, <strong>kameralar ile izlenebilen</strong> barÄ±naklar ve
        <strong>yaÅŸatma odaklÄ± Ã§Ã¶zÃ¼mler</strong> tarafÄ±ndaysan;
        <br>adÄ±nÄ± bu sayaca ekleyerek politika deÄŸil <strong>merhamet</strong> tarafÄ±nÄ± seÃ§miÅŸ oluyorsun.</br>
      </p>
    </header>

    <!-- TOTAL COUNTER -->
    <section class="total-counter">
      <div class="total-label">TOPLAM DESTEKÃ‡Ä°</div>
      <div class="total-number" id="totalCount">0</div>
      <div class="total-note">
        <span class="dot-live"></span>
        <span>Bu sayÄ±, bu sayfadan toplanan imzalarla bÃ¼yÃ¼r.</span>
      </div>
    </section>

    <!-- FORM -->
    <main class="main">
      <section>
        <div class="card">
          <h2 class="card-title">benidesay</h2>
          <p class="card-subtitle">Sokak hayvanlarÄ± iÃ§in kurduÄŸumuz iyilik zincirine adÄ±nÄ± yaz.</p>

          <div class="mini-counter">
            <span>Åu ana kadar destek veren:</span>
            <span class="mini-counter-number" id="supportCount">0</span>
            <span>kiÅŸi</span>
          </div>

          <form id="supportForm">
            <input type="hidden" name="emailHash" id="emailHash">
            <input type="hidden" name="cityStored" id="cityStored">

            <label for="emailDisplay">E-posta adresin *</label>
            <input id="emailDisplay" type="email" placeholder="e-postanÄ± buraya yaz" required>

            <label for="city">Åehrin *</label>
            <select id="city" required>
              <option value="">Åehrini seÃ§</option>
              <option value="Adana">Adana</option>
              <option value="Ä°stanbul">Ä°stanbul</option>
              <option value="Ä°zmir">Ä°zmir</option>
              <option value="Ankara">Ankara</option>
              <option value="DiÄŸer - YurtdÄ±ÅŸÄ±">DiÄŸer - YurtdÄ±ÅŸÄ±</option>
              <!-- (tam listeyi seninkinden koruyacaÄŸÄ±m, sadece kÄ±salttÄ±m) -->
            </select>

            <button type="submit">Ben de varÄ±m</button>

            <div class="note">
              E-postan tarayÄ±cÄ±da <strong>SHA-256 ile hash</strong>â€™lenir.
              GerÃ§ek adresini kimse gÃ¶remez; sadece Ã§Ã¶zÃ¼lemeyen bir iz bÄ±rakmÄ±ÅŸ olursun.
            </div>

            <div class="success" id="successMsg">
              TeÅŸekkÃ¼rler ğŸ’› AdÄ±n bu iyilik zincirinde yerini aldÄ±.
            </div>
          </form>
        </div>
      </section>

      <!-- INFO -->
      <section class="info-sections">

        <!-- 1 -->
        <div class="info-block">
          <div class="info-image">
            <img src="block1image.png" alt="">
          </div>
          <div class="info-text">
            <h3>Beni de say nedir?</h3>
            <p>
              <strong>Beni de say</strong>; mahalledeki kediyi ve kÃ¶peÄŸi
              <strong>â€œtoplayÄ±p gÃ¶tÃ¼rmeyiâ€ Ã§Ã¶zÃ¼m saymayanlarÄ±n</strong> ortak listesi.
            </p>
            <p>
              AmacÄ±mÄ±z, masum canlarÄ±n tarafÄ±nda kaÃ§ kiÅŸi olduÄŸumuzu gÃ¶rÃ¼nÃ¼r kÄ±lmak.
            </p>
          </div>
        </div>

        <!-- 2 -->
        <div class="info-block reverse">
          <div class="info-image">
            <img src="block2image.png" alt="">
          </div>
          <div class="info-text">
            <h3>Bu sayaÃ§ neye yarayacak?</h3>
            <p>
              Bu sayaÃ§, sokak hayvanlarÄ± iÃ§in <strong>insanca Ã§Ã¶zÃ¼m</strong> isteyenlerin sayÄ±sÄ±nÄ± gÃ¶rÃ¼nÃ¼r kÄ±lar.
            </p>
            <p>
              <strong>â€œBiz buradayÄ±z ve yaÅŸatma odaklÄ± Ã§Ã¶zÃ¼mler istiyoruz.â€</strong>
            </p>
          </div>
        </div>

        <!-- 3 -->
        <div class="info-block">
          <div class="info-image">
            <img src="block3image.png" alt="">
          </div>
          <div class="info-text">
            <h3>Gizlilik ve adalet sÃ¶zÃ¼</h3>
            <p>
              E-posta adresin sistemde yalnÄ±zca <strong>ÅŸifrelenmiÅŸ bir iz</strong> olarak kalÄ±r.
            </p>
            <p>
              SayaÃ§; sokak hayvanlarÄ±nÄ± korumak isteyenlerin sayÄ±sÄ±nÄ± <strong>adil</strong> biÃ§imde gÃ¶sterir.
            </p>
          </div>
        </div>

        <!-- DISCLAIMER -->
        <div class="info-disclaimer">
          <strong>benidesay</strong>; herhangi bir parti, kurum ya da siyasi yapÄ± adÄ±na oluÅŸturulmuÅŸ deÄŸildir.
        </div>

      </section>
    </main>

    <footer class="footer">
      Bu sayfa gÃ¶nÃ¼llÃ¼ler tarafÄ±ndan hazÄ±rlanmÄ±ÅŸtÄ±r.
    </footer>

  </div>

<script>
  const SCRIPT_URL =
    "https://script.google.com/macros/s/AKfycbyRHBP9XZfru7dcEIEXGC1_qvdA58P_51hWA-jAYHfW9FZmePQr2W9zK9BLBS1i-ZIw/exec";

  async function sha256(message) {
    const msgUint8 = new TextEncoder().encode(message);
    const hashBuffer = await crypto.subtle.digest("SHA-256", msgUint8);
    return Array.from(new Uint8Array(hashBuffer))
      .map(b => b.toString(16).padStart(2, "0"))
      .join("");
  }

  const form = document.getElementById("supportForm");
  const emailDisplay = document.getElementById("emailDisplay");
  const emailHashInput = document.getElementById("emailHash");
  const citySelect = document.getElementById("city");
  const cityStored = document.getElementById("cityStored");
  const successMsg = document.getElementById("successMsg");
  const supportCountEl = document.getElementById("supportCount");
  const totalCountEl = document.getElementById("totalCount");

  async function fetchCounts() {
    try {
      const res = await fetch(SCRIPT_URL);
      const data = await res.json();
      const total = Number(data.total) || 0;
      const unique = Number(data.unique) || total;
      totalCountEl.textContent = total;
      supportCountEl.textContent = unique;
    } catch (e) {
      console.error("SayaÃ§ alÄ±namadÄ±", e);
    }
  }

  fetchCounts();

  form.addEventListener("submit", async (e) => {
    e.preventDefault();
    if (form.dataset.submitting === "true") return;

    const email = (emailDisplay.value || "").trim().toLowerCase();
    const city = citySelect.value;

    if (!email || !city) return;

    try {
      form.dataset.submitting = "true";

      const hash = await sha256(email);
      emailHashInput.value = hash;
      cityStored.value = city;

      await fetch(SCRIPT_URL, {
        method: "POST",
        headers: { "Content-Type": "application/json" },
        body: JSON.stringify({ emailHash: hash, city })
      });

      emailDisplay.value = "";
      citySelect.value = "";
      successMsg.style.display = "block";

      await fetchCounts();

    } catch (err) {
      console.error("GÃ¶nderilemedi", err);
    } finally {
      form.dataset.submitting = "false";
    }
  });
</script>

</body>
</html>
